the complete HTML demo with all the provided code integrated:

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åŒåŸä¹‹å¤œï¼šç›–èŒ¨æ¯”çš„ä»£ä»·</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    :root {
      --midnight-blue: #0A0F2C;
      --gilded-orange: #D4A574;
      --rust-red: #8B2635;
      --neon-green: #00FF88;
      --alert-red: #FF0040;
      --text-primary: #FFFFFF;
      --text-secondary: #B0B0B0;
      --bg-dark: #050817;
      --panel-bg: rgba(10, 15, 44, 0.9);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto Mono', monospace;
      background-color: var(--bg-dark);
      color: var(--text-primary);
      overflow: hidden;
      user-select: none;
    }

    /* ä¸»èœå• */
    #main-menu {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, var(--midnight-blue) 0%, var(--bg-dark) 100%);
    }

    #game-title {
      font-family: 'Bebas Neue', cursive;
      font-size: 4rem;
      color: var(--gilded-orange);
      margin-bottom: 3rem;
      text-align: center;
      letter-spacing: 0.1em;
    }

    .menu-button {
      width: 300px;
      padding: 15px 30px;
      margin: 10px 0;
      background: var(--panel-bg);
      border: 2px solid var(--gilded-orange);
      color: var(--text-primary);
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
    }

    .menu-button:hover {
      background: var(--gilded-orange);
      color: var(--bg-dark);
      transform: scale(1.05);
    }

    .menu-button:active {
      transform: scale(0.95);
    }

    /* æ¸¸æˆä¸»ç•Œé¢ */
    #game-container {
      width: 100vw;
      height: 100vh;
      display: none;
      flex-direction: column;
    }

    /* é¡¶éƒ¨æ  */
    #top-bar {
      height: 80px;
      background: var(--panel-bg);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 2rem;
      border-bottom: 2px solid var(--gilded-orange);
    }

    #opinion-monitor {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .media-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--rust-red);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }

    #opinion-percentage {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--neon-green);
    }

    #date-time {
      text-align: center;
    }

    #date-time .date {
      font-size: 1.2rem;
      color: var(--text-primary);
    }

    #date-time .time {
      font-size: 1rem;
      color: var(--text-secondary);
    }

    #budget-bracelet {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.5rem;
      font-weight: bold;
    }

    .bracelet-icon {
      width: 40px;
      height: 40px;
      background: var(--neon-green);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--bg-dark);
    }

    /* ä¸»æ“ä½œåŒº */
    #main-play-area {
      flex: 1;
      display: flex;
      position: relative;
    }

    .screen-divider {
      position: absolute;
      left: 50%;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--gilded-orange);
      z-index: 10;
    }

    .screen {
      flex: 1;
      padding: 2rem;
      display: flex;
      flex-direction: column;
    }

    #luxury-screen {
      background: linear-gradient(180deg, var(--midnight-blue) 0%, var(--bg-dark) 100%);
      border-right: 1px solid var(--gilded-orange);
    }

    #community-screen {
      background: linear-gradient(180deg, var(--rust-red) 0%, var(--bg-dark) 100%);
    }

    .screen h2 {
      font-size: 2rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    #luxury-screen h2 {
      color: var(--gilded-orange);
    }

    #community-screen h2 {
      color: var(--neon-green);
    }

    /* NPCåŒºåŸŸ */
    .npc-area {
      flex: 1;
      background: var(--panel-bg);
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .demand-card, .family-card {
      background: rgba(255, 255, 255, 0.1);
      padding: 1rem;
      margin-bottom: 0.5rem;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
    }

    .demand-card:hover, .family-card:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateX(5px);
    }

    .demand-card {
      border-left-color: var(--gilded-orange);
    }

    .family-card {
      border-left-color: var(--neon-green);
    }

    .card-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .card-cost {
      color: var(--gilded-orange);
      font-size: 1rem;
    }

    .card-effect {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    /* ä»ªè¡¨ç›˜ */
    .dashboard {
      background: var(--panel-bg);
      padding: 1rem;
      border-radius: 10px;
      text-align: center;
    }

    .dashboard h3 {
      font-size: 1.2rem;
      margin-bottom: 0.5rem;
    }

    .gauge {
      width: 100%;
      height: 30px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 15px;
      overflow: hidden;
      margin: 0.5rem 0;
      position: relative;
    }

    .gauge-fill {
      height: 100%;
      transition: width 0.5s ease;
      border-radius: 15px;
    }

    .luxury-fill {
      background: linear-gradient(90deg, var(--gilded-orange), #FFD700);
    }

    .hunger-fill {
      background: linear-gradient(90deg, var(--neon-green), var(--rust-red));
    }

    .gauge-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-weight: bold;
      font-size: 1rem;
    }

    /* äº‹ä»¶å¼¹çª— */
    #event-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .event-card {
      background: var(--panel-bg);
      border: 2px solid var(--gilded-orange);
      border-radius: 10px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from {
        transform: translateY(-100px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .event-title {
      font-size: 1.5rem;
      color: var(--gilded-orange);
      margin-bottom: 1rem;
    }

    .event-description {
      margin-bottom: 2rem;
      line-height: 1.6;
    }

    .event-choices {
      display: flex;
      gap: 1rem;
      justify-content: center;
    }

    .choice-btn {
      padding: 10px 20px;
      background: var(--panel-bg);
      border: 2px solid var(--neon-green);
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Roboto Mono', monospace;
    }

    .choice-btn:hover {
      background: var(--neon-green);
      color: var(--bg-dark);
    }

    .choice-btn.danger {
      border-color: var(--alert-red);
    }

    .choice-btn.danger:hover {
      background: var(--alert-red);
    }

    /* ç»“ç®—ç•Œé¢ */
    #settlement-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--bg-dark);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .settlement-content {
      text-align: center;
      max-width: 600px;
      padding: 2rem;
    }

    .settlement-title {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    .settlement-title.victory {
      color: var(--neon-green);
    }

    .settlement-title.defeat {
      color: var(--alert-red);
    }

    .settlement-stats {
      margin: 2rem 0;
      text-align: left;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      background: var(--panel-bg);
      border-radius: 5px;
    }

    /* è®¾ç½®ç•Œé¢ */
    #settings-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--bg-dark);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .settings-content {
      background: var(--panel-bg);
      padding: 2rem;
      border-radius: 10px;
      width: 90%;
      max-width: 500px;
    }

    .setting-item {
      margin-bottom: 1.5rem;
    }

    .setting-item label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--text-primary);
    }

    .setting-item input[type="range"] {
      width: 100%;
    }

    .setting-item select {
      width: 100%;
      padding: 0.5rem;
      background: var(--bg-dark);
      color: var(--text-primary);
      border: 1px solid var(--gilded-orange);
      border-radius: 5px;
    }

    /* èƒŒåŒ…ç•Œé¢ */
    #inventory-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--bg-dark);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .inventory-content {
      background: var(--panel-bg);
      padding: 2rem;
      border-radius: 10px;
      width: 90%;
      max-width: 600px;
    }

    .inventory-grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      gap: 10px;
      margin-top: 1rem;
    }

    .inventory-slot {
      width: 60px;
      height: 60px;
      background: var(--bg-dark);
      border: 2px solid var(--text-secondary);
      border-radius: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .inventory-slot:hover {
      border-color: var(--gilded-orange);
    }

    .inventory-slot.occupied {
      border-color: var(--neon-green);
      background: rgba(0, 255, 136, 0.1);
    }

    /* æŠ€èƒ½æ ‘ç•Œé¢ */
    #skill-tree-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: var(--bg-dark);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .skill-tree-content {
      background: var(--panel-bg);
      padding: 2rem;
      border-radius: 10px;
      width: 90%;
      max-width: 800px;
      height: 80vh;
      overflow-y: auto;
    }

    .skill-branch {
      margin-bottom: 2rem;
    }

    .skill-branch h3 {
      color: var(--gilded-orange);
      margin-bottom: 1rem;
    }

    .skill-nodes {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .skill-node {
      width: 120px;
      padding: 1rem;
      background: var(--bg-dark);
      border: 2px solid var(--text-secondary);
      border-radius: 5px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .skill-node.unlocked {
      border-color: var(--neon-green);
      background: rgba(0, 255, 136, 0.2);
    }

    .skill-node:hover:not(.unlocked) {
      border-color: var(--gilded-orange);
    }

    /* åº•éƒ¨æ§åˆ¶æ  */
    #bottom-controls {
      height: 60px;
      background: var(--panel-bg);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      border-top: 2px solid var(--gilded-orange);
    }

    .control-btn {
      padding: 10px 20px;
      background: var(--panel-bg);
      border: 2px solid var(--text-secondary);
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Roboto Mono', monospace;
    }

    .control-btn:hover {
      border-color: var(--gilded-orange);
    }

    .control-btn.active {
      border-color: var(--neon-green);
      background: rgba(0, 255, 136, 0.2);
    }

    /* å“åº”å¼ */
    @media (max-width: 768px) {
      .screen {
        padding: 1rem;
      }
      
      #game-title {
        font-size: 2.5rem;
      }
      
      .menu-button {
        width: 250px;
      }
    }
  </style>
</head>
<body>
  <!-- ä¸»èœå• -->
  <div id="main-menu">
    <h1 id="game-title">åŒåŸä¹‹å¤œï¼šç›–èŒ¨æ¯”çš„ä»£ä»·</h1>
    <button class="menu-button" onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
    <button class="menu-button" onclick="openSettings()">è®¾ç½®</button>
    <button class="menu-button" onclick="showHelp()">å¸®åŠ©</button>
  </div>

  <!-- æ¸¸æˆä¸»å®¹å™¨ -->
  <div id="game-container">
    <!-- é¡¶éƒ¨æ  -->
    <div id="top-bar">
      <div id="opinion-monitor">
        <div class="media-avatar">ğŸ“º</div>
        <div id="opinion-percentage">50%</div>
      </div>
      <div id="date-time">
        <div class="date">Day <span id="current-day">1</span> - Nov 1, 2025</div>
        <div class="time">06:00</div>
      </div>
      <div id="budget-bracelet">
        <div class="bracelet-icon">ğŸ’°</div>
        <span id="budget-amount">$1,000,000</span>
      </div>
    </div>

    <!-- ä¸»æ“ä½œåŒº -->
    <div id="main-play-area">
      <div class="screen-divider"></div>
      
      <!-- å·¦å±ï¼šæ´¾å¯¹ä¸–ç•Œ -->
      <div id="luxury-screen" class="screen">
        <h2>ğŸ¾ æµ·æ¹–åº„å›­æ´¾å¯¹</h2>
        <div class="npc-area">
          <div id="luxury-demands">
            <div class="demand-card" data-cost="50000" data-luxury="5" data-opinion="-2">
              <div class="card-title">åŸºç¡€é¦™æ§Ÿå¡”</div>
              <div class="card-cost">æˆæœ¬: $50,000</div>
              <div class="card-effect">å¥¢åæŒ‡æ•° +5, èˆ†è®º -2%</div>
            </div>
            <div class="demand-card" data-cost="100000" data-luxury="10" data-opinion="-5">
              <div class="card-title">ç©ºè¿é±¼å­é…±</div>
              <div class="card-cost">æˆæœ¬: $100,000</div>
              <div class="card-effect">å¥¢åæŒ‡æ•° +10, èˆ†è®º -5%</div>
            </div>
          </div>
        </div>
        <div class="dashboard">
          <h3>å¥¢åæŒ‡æ•°</h3>
          <div class="gauge">
            <div class="gauge-fill luxury-fill" id="luxury-gauge" style="width: 0%"></div>
            <div class="gauge-text" id="luxury-percentage">0%</div>
          </div>
        </div>
      </div>

      <!-- å³å±ï¼šç¤¾åŒºä¸–ç•Œ -->
      <div id="community-screen" class="screen">
        <h2>ğŸ˜ï¸ é“é”ˆç¤¾åŒºæ´åŠ©</h2>
        <div class="npc-area">
          <div id="community-families">
            <div class="family-card" data-cost="30" data-hunger="-0.1" data-opinion="1">
              <div class="card-title">ç›ä¸½äºšå®¶åº­</div>
              <div class="card-cost">æˆæœ¬: $30</div>
              <div class="card-effect">é¥¥é¥¿æŒ‡æ•° -0.1%, èˆ†è®º +1%</div>
            </div>
            <div class="family-card" data-cost="30" data-hunger="-0.1" data-opinion="1">
              <div class="card-title">æ±¤å§†å®¶åº­</div>
              <div class="card-cost">æˆæœ¬: $30</div>
              <div class="card-effect">é¥¥é¥¿æŒ‡æ•° -0.1%, èˆ†è®º +1%</div>
            </div>
          </div>
        </div>
        <div class="dashboard">
          <h3>é¥¥é¥¿æŒ‡æ•°</h3>
          <div class="gauge">
            <div class="gauge-fill hunger-fill" id="hunger-gauge" style="width: 100%"></div>
            <div class="gauge-text" id="hunger-percentage">100%</div>
          </div>
        </div>
      </div>
    </div>

    <!-- åº•éƒ¨æ§åˆ¶æ  -->
    <div id="bottom-controls">
      <button class="control-btn" id="speed-1x" onclick="setSpeed(1)">1x</button>
      <button class="control-btn active" id="speed-2x" onclick="setSpeed(2)">2x</button>
      <button class="control-btn" id="speed-4x" onclick="setSpeed(4)">4x</button>
      <button class="control-btn" onclick="togglePause()">â¸ï¸</button>
      <button class="control-btn" onclick="openInventory()">ğŸ’ èƒŒåŒ…</button>
      <button class="control-btn" onclick="openSkillTree()">ğŸŒŸ æŠ€èƒ½</button>
    </div>
  </div>

  <!-- äº‹ä»¶å¼¹çª— -->
  <div id="event-modal">
    <div class="event-card">
      <h3 class="event-title" id="event-title">é“å¾·å›°å¢ƒ</h3>
      <p class="event-description" id="event-description">äº‹ä»¶æè¿°</p>
      <div class="event-choices" id="event-choices">
        <button class="choice-btn" onclick="handleEventChoice('approve')">æ‰¹å‡†</button>
        <button class="choice-btn danger" onclick="handleEventChoice('refuse')">æ‹’ç»</button>
      </div>
    </div>
  </div>

  <!-- ç»“ç®—ç•Œé¢ -->
  <div id="settlement-modal">
    <div class="settlement-content">
      <h2 class="settlement-title" id="settlement-title">Day Complete</h2>
      <div class="settlement-stats" id="settlement-stats">
        <!-- åŠ¨æ€ç”Ÿæˆç»Ÿè®¡ -->
      </div>
      <button class="menu-button" onclick="nextDay()">ä¸‹ä¸€å¤©</button>
    </div>
  </div>

  <!-- è®¾ç½®ç•Œé¢ -->
  <div id="settings-modal">
    <div class="settings-content">
      <h2 style="color: var(--gilded-orange); margin-bottom: 2rem;">è®¾ç½®</h2>
      <div class="setting-item">
        <label>ä¸»éŸ³é‡</label>
        <input type="range" min="0" max="100" value="80" onchange="updateVolume('master', this.value)">
      </div>
      <div class="setting-item">
        <label>éŸ³æ•ˆéŸ³é‡</label>
        <input type="range" min="0" max="100" value="70" onchange="updateVolume('sfx', this.value)">
      </div>
      <div class="setting-item">
        <label>éš¾åº¦</label>
        <select onchange="changeDifficulty(this.value)">
          <option value="easy">ç®€å•</option>
          <option value="normal" selected>æ™®é€š</option>
          <option value="hard">å›°éš¾</option>
        </select>
      </div>
      <button class="menu-button" onclick="closeSettings()">è¿”å›</button>
    </div>
  </div>

  <!-- èƒŒåŒ…ç•Œé¢ -->
  <div id="inventory-modal">
    <div class="inventory-content">
      <h2 style="color: var(--gilded-orange); margin-bottom: 1rem;">åº”æ€¥å‚¨å¤‡</h2>
      <div class="inventory-grid" id="inventory-grid">
        <!-- åŠ¨æ€ç”Ÿæˆæ ¼å­ -->
      </div>
      <button class="menu-button" onclick="closeInventory()" style="margin-top: 1rem;">å…³é—­</button>
    </div>
  </div>

  <!-- æŠ€èƒ½æ ‘ç•Œé¢ -->
  <div id="skill-tree-modal">
    <div class="skill-tree-content">
      <h2 style="color: var(--gilded-orange); margin-bottom: 2rem;">æŠ€èƒ½æ ‘</h2>
      <div class="skill-branch">
        <h3>æ•ˆç‡ç³»</h3>
        <div class="skill-nodes">
          <div class="skill-node unlocked">å¿«é€Ÿå®¡æ‰¹</div>
          <div class="skill-node">æ‰¹é‡å¤„ç†</div>
          <div class="skill-node">è‡ªåŠ¨åŒ–</div>
        </div>
      </div>
      <div class="skill-branch">
        <h3>é“å¾·ç³»</h3>
        <div class="skill-nodes">
          <div class="skill-node">æ‚²æƒ…å™äº‹</div>
          <div class="skill-node">é€æ˜è´¦æœ¬</div>
          <div class="skill-node">ç¤¾åŒºé¢†è¢–</div>
        </div>
      </div>
      <div class="skill-branch">
        <h3>æƒè°‹ç³»</h3>
        <div class="skill-nodes">
          <div class="skill-node">åª’ä½“æ“æ§</div>
          <div class="skill-node">æš—ç®±æ“ä½œ</div>
          <div class="skill-node">å¤§äº¨åŒç›Ÿ</div>
        </div>
      </div>
      <button class="menu-button" onclick="closeSkillTree()" style="margin-top: 1rem;">å…³é—­</button>
    </div>
  </div>

  <script>
    // æ¸¸æˆçŠ¶æ€ç®¡ç†
    class GameState {
      constructor() {
        this.day = 1;
        this.budget = 1000000;
        this.luxuryIndex = 0;
        this.hungerIndex = 100;
        this.opinionIndex = 50;
        this.isPaused = false;
        this.gameSpeed = 2;
        this.difficulty = 'normal';
        this.difficultyMultipliers = {
          easy: { budget: 1.2, hunger: 0.5, opinion: 1.3 },
          normal: { budget: 1.0, hunger: 1.0, opinion: 1.0 },
          hard: { budget: 0.8, hunger: 1.5, opinion: 0.7 }
        };
        
        // äº‹ä»¶ç³»ç»Ÿ
        this.currentEvent = null;
        this.events = [
          {
            id: 'maria_medicine',
            title: 'ç›ä¸½äºšçš„å›°å¢ƒ',
            description: 'ç›ä¸½äºšçš„å­©å­å‘çƒ§äº†ï¼Œéœ€è¦ä»æ´¾å¯¹é¢„ç®—æŒªç”¨$20,000ä¹°è¯ã€‚æ˜¯å¦æ‰¹å‡†ï¼Ÿ',
            choices: {
              approve: { cost: 200000, opinion: 5, hunger: -0.5, luxury: 0 },
              refuse: { cost: 0, opinion: -10, hunger: 0, luxury: 0 }
            }
          },
          {
            id: 'rubio_deal',
            title: 'é²æ¯”å¥¥çš„æè®®',
            description: 'é²æ¯”å¥¥æè®®èŠ±$300,000é›‡ä½£æ°´å†›ï¼Œå°†é¥¥é¥¿é—®é¢˜å½’å’äºå¯¹æ‰‹ã€‚æ˜¯å¦æ¥å—ï¼Ÿ',
            choices: {
              approve: { cost: 300000, opinion: 15, hunger: 0, luxury: 0 },
              refuse: { cost: 0, opinion: -5, hunger: 0, luxury: 0 }
            }
          },
          {
            id: 'donald_demand',
            title: 'å¤§äº¨çš„ä¸æ»¡',
            description: 'å¤§äº¨è¦æ±‚è¿½åŠ $150,000ç”¨äºç§äººé£æœºï¼Œå¦åˆ™å°†æ›å…‰ä½ çš„"æ— èƒ½"ã€‚',
            choices: {
              approve: { cost: 150000, opinion: -5, hunger: 0, luxury: 10 },
              refuse: { cost: 0, opinion: -15, hunger: 0, luxury: -5 }
            }
          }
        ];
        
        // é“å…·ç³»ç»Ÿ
        this.inventory = [
          { id: 'emergency_food', name: 'ç´§æ€¥é£Ÿå“åŒ…', quantity: 3 },
          { id: 'pr_letter', name: 'å…¬å…³ç¨¿', quantity: 1 }
        ];
        
        this.init();
      }
      
      init() {
        this.updateUI();
        this.generateInventoryGrid();
      }
      
      // å¤„ç†éœ€æ±‚å¡ç‰‡ç‚¹å‡»
      handleDemandClick(element) {
        if (this.isPaused) return;
        
        const cost = parseInt(element.dataset.cost);
        const luxuryGain = parseInt(element.dataset.luxury);
        const opinionImpact = parseInt(element.dataset.opinion);
        
        if (this.budget >= cost) {
          this.budget -= cost;
          this.luxuryIndex = Math.min(100, this.luxuryIndex + luxuryGain);
          this.opinionIndex = Math.max(0, Math.min(100, this.opinionIndex + opinionImpact));
          
          // æ›´æ–°é¥¥é¥¿æŒ‡æ•°ï¼ˆæ¢ç®—æ¯”1:3.5ï¼‰
          const hungerIncrease = (cost / 35000) * 10;
          this.hungerIndex = Math.min(100, this.hungerIndex + hungerIncrease);
          
          this.updateUI();
          this.showFeedback(`${element.querySelector('.card-title').textContent} å·²æ‰§è¡Œ`, 'success');
        } else {
          this.showFeedback('é¢„ç®—ä¸è¶³ï¼', 'error');
        }
      }
      
      // å¤„ç†å®¶åº­æ•‘åŠ©ç‚¹å‡»
      handleFamilyClick(element) {
        if (this.isPaused) return;
        
        const cost = parseInt(element.dataset.cost);
        const hungerRelief = parseFloat(element.dataset.hunger);
        const opinionImpact = parseInt(element.dataset.opinion);
        
        if (this.budget >= cost) {
          this.budget -= cost;
          this.hungerIndex = Math.max(0, this.hungerIndex + hungerRelief);
          this.opinionIndex = Math.max(0, Math.min(100, this.opinionIndex + opinionImpact));
          
          this.updateUI();
          this.showFeedback('å·²æ•‘åŠ©ä¸€ä¸ªå®¶åº­', 'success');
        } else {
          this.showFeedback('é¢„ç®—ä¸è¶³ï¼', 'error');
        }
      }
      
      // è§¦å‘éšæœºäº‹ä»¶
      triggerRandomEvent() {
        const event = this.events[Math.floor(Math.random() * this.events.length)];
        this.currentEvent = event;
        
        document.getElementById('event-title').textContent = event.title;
        document.getElementById('event-description').textContent = event.description;
        document.getElementById('event-modal').style.display = 'flex';
        this.isPaused = true;
      }
      
      // å¤„ç†äº‹ä»¶é€‰æ‹©
      handleEventChoice(choice) {
        if (!this.currentEvent) return;
        
        const effect = this.currentEvent.choices[choice];
        
        if (this.budget >= effect.cost) {
          this.budget -= effect.cost;
          this.luxuryIndex = Math.min(100, this.luxuryIndex + (effect.luxury || 0));
          this.hungerIndex = Math.max(0, Math.min(100, this.hungerIndex + (effect.hunger || 0)));
          this.opinionIndex = Math.max(0, Math.min(100, this.opinionIndex + effect.opinion));
          
          this.updateUI();
          this.closeModal('event-modal');
          this.isPaused = false;
          this.showFeedback(`äº‹ä»¶å¤„ç†å®Œæˆ`, 'success');
        } else {
          this.showFeedback('é¢„ç®—ä¸è¶³æ— æ³•æ‰§è¡Œæ­¤é€‰æ‹©ï¼', 'error');
        }
      }
      
      // æ¯æ—¥ç»“ç®—
      dailySettlement() {
        const multiplier = this.difficultyMultipliers[this.difficulty];
        
        // è®¡ç®—ç¨³å®šæ€§
        const stability = 100 - Math.abs(this.luxuryIndex - this.hungerIndex);
        
        // è®¡ç®—æ˜æ—¥é¢„ç®—
        const nextBudget = 1000000 * (this.opinionIndex / 50) * multiplier.budget;
        
        // æ˜¾ç¤ºç»“ç®—
        document.getElementById('settlement-title').textContent = `Day ${this.day} ç»“æŸ`;
        document.getElementById('settlement-title').className = 'settlement-title';
        
        const statsHtml = `
          <div class="stat-item">
            <span>å¥¢åæŒ‡æ•°</span>
            <span style="color: var(--gilded-orange);">${this.luxuryIndex.toFixed(1)}%</span>
          </div>
          <div class="stat-item">
            <span>é¥¥é¥¿æŒ‡æ•°</span>
            <span style="color: var(--neon-green);">${this.hungerIndex.toFixed(1)}%</span>
          </div>
          <div class="stat-item">
            <span>èˆ†è®ºæŒ‡æ•°</span>
            <span style="color: var(--neon-green);">${this.opinionIndex.toFixed(1)}%</span>
          </div>
          <div class="stat-item">
            <span>ç¤¾ä¼šç¨³å®šæ€§</span>
            <span style="color: ${stability > 50 ? 'var(--neon-green)' : 'var(--alert-red)'};">${stability.toFixed(1)}%</span>
          </div>
          <div class="stat-item">
            <span>æ˜æ—¥é¢„ç®—</span>
            <span style="color: var(--gilded-orange);">$${nextBudget.toLocaleString()}</span>
          </div>
        `;
        
        document.getElementById('settlement-stats').innerHTML = statsHtml;
        document.getElementById('settlement-modal').style.display = 'flex';
        
        this.isPaused = true;
      }
      
      // ä¸‹ä¸€å¤©
      nextDay() {
        this.day++;
        const multiplier = this.difficultyMultipliers[this.difficulty];
        this.budget = 1000000 * (this.opinionIndex / 50) * multiplier.budget;
        
        // éšæœºäº‹ä»¶è§¦å‘
        if (Math.random() < 0.3) {
          setTimeout(() => this.triggerRandomEvent(), 1000);
        }
        
        this.updateUI();
        this.closeModal('settlement-modal');
        this.isPaused = false;
        
        // æ£€æŸ¥æ¸¸æˆç»“æŸ
        if (this.day > 3) {
          this.endGame();
        }
      }
      
      // æ¸¸æˆç»“æŸ
      endGame() {
        const stability = 100 - Math.abs(this.luxuryIndex - this.hungerIndex);
        const victory = stability >= 30;
        
        document.getElementById('settlement-title').textContent = victory ? 'èƒœåˆ©ï¼' : 'å¤±è´¥ï¼';
        document.getElementById('settlement-title').className = victory ? 'settlement-title victory' : 'settlement-title defeat';
        
        const statsHtml = `
          <div class="stat-item">
            <span>æœ€ç»ˆç¨³å®šæ€§</span>
            <span style="color: ${victory ? 'var(--neon-green)' : 'var(--alert-red)'};">${stability.toFixed(1)}%</span>
          </div>
          <div class="stat-item">
            <span>æ€»å¤©æ•°</span>
            <span>${this.day} å¤©</span>
          </div>
          <div class="stat-item">
            <span>æœ€ç»ˆèˆ†è®º</span>
            <span>${this.opinionIndex.toFixed(1)}%</span>
          </div>
        `;
        
        document.getElementById('settlement-stats').innerHTML = statsHtml;
        document.getElementById('settlement-modal').style.display = 'flex';
        
        // æ›¿æ¢æŒ‰é’®
        document.querySelector('#settlement-modal .menu-button').textContent = 'è¿”å›ä¸»èœå•';
        document.querySelector('#settlement-modal .menu-button').onclick = () => location.reload();
      }
      
      // æ›´æ–°UI
      updateUI() {
        document.getElementById('current-day').textContent = this.day;
        document.getElementById('budget-amount').textContent = `$${Math.floor(this.budget).toLocaleString()}`;
        document.getElementById('opinion-percentage').textContent = `${this.opinionIndex.toFixed(0)}%`;
        document.getElementById('luxury-percentage').textContent = `${this.luxuryIndex.toFixed(0)}%`;
        document.getElementById('hunger-percentage').textContent = `${this.hungerIndex.toFixed(0)}%`;
        
        document.getElementById('luxury-gauge').style.width = `${this.luxuryIndex}%`;
        document.getElementById('hunger-gauge').style.width = `${this.hungerIndex}%`;
        
        // æ›´æ–°èˆ†è®ºé¢œè‰²
        const opinionEl = document.getElementById('opinion-percentage');
        if (this.opinionIndex > 70) {
          opinionEl.style.color = 'var(--neon-green)';
        } else if (this.opinionIndex > 30) {
          opinionEl.style.color = 'var(--gilded-orange)';
        } else {
          opinionEl.style.color = 'var(--alert-red)';
        }
      }
      
      // ç”ŸæˆèƒŒåŒ…ç½‘æ ¼
      generateInventoryGrid() {
        const grid = document.getElementById('inventory-grid');
        grid.innerHTML = '';
        
        for (let i = 0; i < 32; i++) {
          const slot = document.createElement('div');
          slot.className = 'inventory-slot';
          
          if (i < this.inventory.length) {
            slot.classList.add('occupied');
            slot.textContent = this.inventory[i].name.substring(0, 2);
            slot.title = `${this.inventory[i].name} x${this.inventory[i].quantity}`;
          }
          
          grid.appendChild(slot);
        }
      }
      
      // æ˜¾ç¤ºåé¦ˆ
      showFeedback(message, type) {
        const feedback = document.createElement('div');
        feedback.textContent = message;
        feedback.style.cssText = `
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          padding: 1rem 2rem;
          background: ${type === 'success' ? 'var(--neon-green)' : 'var(--alert-red)'};
          color: var(--bg-dark);
          font-weight: bold;
          border-radius: 5px;
          z-index: 2000;
          animation: fadeInOut 2s ease;
        `;
        
        document.body.appendChild(feedback);
        setTimeout(() => feedback.remove(), 2000);
      }
      
      // å…³é—­å¼¹çª—
      closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
      }
    }

    // å…¨å±€æ¸¸æˆå®ä¾‹
    let gameState;

    // å¯åŠ¨æ¸¸æˆ
    function startGame() {
      document.getElementById('main-menu').style.display = 'none';
      document.getElementById('game-container').style.display = 'flex';
      
      gameState = new GameState();
      
      // ç»‘å®šäº‹ä»¶
      bindEvents();
      
      // æ¯æ—¥ç»“ç®—å®šæ—¶å™¨ï¼ˆç®€åŒ–ç‰ˆï¼Œæ¯30ç§’=1å¤©ï¼‰
      setInterval(() => {
        if (!gameState.isPaused && gameState.day <= 3) {
          gameState.dailySettlement();
        }
      }, 30000);
    }

    // ç»‘å®šäº¤äº’äº‹ä»¶
    function bindEvents() {
      // éœ€æ±‚å¡ç‰‡ç‚¹å‡»
      document.querySelectorAll('.demand-card').forEach(card => {
        card.addEventListener('click', () => {
          gameState.handleDemandClick(card);
        });
      });
      
      // å®¶åº­å¡ç‰‡ç‚¹å‡»
      document.querySelectorAll('.family-card').forEach(card => {
        card.addEventListener('click', () => {
          gameState.handleFamilyClick(card);
        });
      });
    }

    // å…¨å±€å‡½æ•°
    function handleEventChoice(choice) {
      gameState.handleEventChoice(choice);
    }

    function nextDay() {
      gameState.nextDay();
    }

    function setSpeed(speed) {
      gameState.gameSpeed = speed;
      document.querySelectorAll('.control-btn[id^="speed-"]').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`speed-${speed}x`).classList.add('active');
    }

    function togglePause() {
      gameState.isPaused = !gameState.isPaused;
      const btn = document.querySelector('.control-btn[onclick="togglePause()"]');
      btn.textContent = gameState.isPaused ? 'â–¶ï¸' : 'â¸ï¸';
    }

    function openSettings() {
      document.getElementById('settings-modal').style.display = 'flex';
    }

    function closeSettings() {
      document.getElementById('settings-modal').style.display = 'none';
    }

    function openInventory() {
      gameState.generateInventoryGrid();
      document.getElementById('inventory-modal').style.display = 'flex';
    }

    function closeInventory() {
      document.getElementById('inventory-modal').style.display = 'none';
    }

    function openSkillTree() {
      document.getElementById('skill-tree-modal').style.display = 'flex';
    }

    function closeSkillTree() {
      document.getElementById('skill-tree-modal').style.display = 'none';
    }

    function showHelp() {
      alert(`æ¸¸æˆå¸®åŠ©ï¼š\n\n1. æ¯æ—¥é¢„ç®—æ˜¯æœ‰é™çš„ï¼Œåˆç†åˆ†é…åˆ°å·¦å³ä¸¤ä¸ªä¸–ç•Œ\n2. å·¦å±æ˜¯å¥¢åæ´¾å¯¹ï¼Œæ»¡è¶³å¤§äº¨éœ€æ±‚ä½†ä¼šæ¶åŒ–èˆ†è®º\n3. å³å±æ˜¯ç¤¾åŒºæ´åŠ©ï¼Œæ•‘åŠ©å®¶åº­ä½†æ¶ˆè€—èµ„é‡‘\n4. èˆ†è®ºæŒ‡æ•°å½±å“æ˜æ—¥é¢„ç®—\n5. é¥¥é¥¿æŒ‡æ•°è¾¾åˆ°100%æˆ–èˆ†è®ºé™åˆ°0%æ¸¸æˆå¤±è´¥\n6. æ¯æ—¥ä¼šæœ‰éšæœºäº‹ä»¶ï¼Œéœ€è¦åšå‡ºé“å¾·æŠ‰æ‹©\n7. åšæŒ3å¤©å³å¯çœ‹åˆ°ç»“å±€`);
    }

    function updateVolume(type, value) {
      console.log(`è®¾ç½®${type}éŸ³é‡ä¸º${value}`);
    }

    function changeDifficulty(difficulty) {
      if (gameState) {
        gameState.difficulty = difficulty;
      }
    }

    // CSSåŠ¨ç”»
    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeInOut {
        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>
```